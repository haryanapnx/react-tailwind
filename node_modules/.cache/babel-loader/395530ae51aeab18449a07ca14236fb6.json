{"ast":null,"code":"import _toConsumableArray from\"/Volumes/Hari_Libur/FE_2020/NRI-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Volumes/Hari_Libur/FE_2020/NRI-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Volumes/Hari_Libur/FE_2020/NRI-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Volumes/Hari_Libur/FE_2020/NRI-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Volumes/Hari_Libur/FE_2020/NRI-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import _ from'lodash';import{Card,NavBar}from'../components/Components';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={users:[]};_this.loadUser=function(){var users=_this.state.users;var url='https://randomuser.me/api/?results=10';axios.get(url).then(function(response){_this.setState({users:[].concat(_toConsumableArray(users),_toConsumableArray(response.data.results))});localStorage.setItem('initialUsers',JSON.stringify(_this.state.users));}).catch(function(err){console.log(err);});};_this.loadMore=function(){if(_this.state.users.length!==100){_this.loadUser();localStorage.setItem('initialUsers',JSON.stringify(_this.state.users));}};_this.handleScrollMobile=function(){var lastData=document.querySelector('div.cards > div.card:last-child');var lastDataOffset=lastData.offsetTop+lastData.clientHeight;var pageOffset=window.pageYOffset+window.innerHeight;if(pageOffset>lastDataOffset){_this.loadMore();}};_this.handleScrollWeb=function(){var lastData=document.querySelector('div.cards > div.card:last-child');var lastDataOffset=lastData.offsetLeft+lastData.clientWidth;var pageOffset=window.pageXOffset+window.innerWidth;if(pageOffset>lastDataOffset){_this.loadMore();}};_this.defineCardColor=function(age){if(age<21){return'red';}else if(age>56){return'blue';}else{return'green';}};_this.sortList=function(key){var arrayCopy=_toConsumableArray(_this.state.users);if(key==='city'){var myOrderedArray=_.sortBy(arrayCopy,\"location.\".concat(key));_this.setState({users:myOrderedArray},function(){localStorage.setItem('initialUsers',JSON.stringify(_this.state.users));});}else{var _myOrderedArray=_.sortBy(arrayCopy,\"dob.\".concat(key));_this.setState({users:_myOrderedArray},function(){localStorage.setItem('initialUsers',JSON.stringify(_this.state.users));});}};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var initialUsers=JSON.parse(localStorage.getItem('initialUsers'));if(!initialUsers||initialUsers.length<1){this.loadUser();}else{this.setState({users:initialUsers});}if(window.innerWidth>=768){this.scrollListener=window.addEventListener('scroll',function(e){_this2.handleScrollWeb(e);});}else{this.scrollListener=window.addEventListener('scroll',function(e){_this2.handleScrollMobile(e);});}}},{key:\"render\",value:function render(){var _this3=this;var users=this.state.users;return/*#__PURE__*/React.createElement(\"div\",{className:'app'},/*#__PURE__*/React.createElement(NavBar,{sortList:this.sortList}),/*#__PURE__*/React.createElement(\"div\",{className:'home container'},/*#__PURE__*/React.createElement(\"div\",{className:'cards'},users.map(function(user){return/*#__PURE__*/React.createElement(Card,{user:user,defineColor:_this3.defineCardColor,key:user.login.username});}))));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Volumes/Hari_Libur/FE_2020/NRI-test/src/components/container/App.jsx"],"names":["React","Component","axios","_","Card","NavBar","App","state","users","loadUser","url","get","then","response","setState","data","results","localStorage","setItem","JSON","stringify","catch","err","console","log","loadMore","length","handleScrollMobile","lastData","document","querySelector","lastDataOffset","offsetTop","clientHeight","pageOffset","window","pageYOffset","innerHeight","handleScrollWeb","offsetLeft","clientWidth","pageXOffset","innerWidth","defineCardColor","age","sortList","key","arrayCopy","myOrderedArray","sortBy","initialUsers","parse","getItem","scrollListener","addEventListener","e","map","user","login","username"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios                from 'axios'\nimport _                    from 'lodash'\nimport { Card, NavBar }     from '../components/Components'\n\nclass App extends Component {\n    state = {\n        users: []\n    }\n\n    loadUser = () => {\n        const { users } = this.state\n        const url = 'https://randomuser.me/api/?results=10'\n        axios.get(url)\n            .then(response => {\n                this.setState({\n                    users: [...users, ...response.data.results]\n                })\n                localStorage.setItem('initialUsers', JSON.stringify(this.state.users))\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    }\n\n    loadMore = () => {\n        if (this.state.users.length !== 100) {\n            this.loadUser()\n            localStorage.setItem('initialUsers', JSON.stringify(this.state.users))\n        }\n    }\n\n    handleScrollMobile = () => {\n        let lastData        = document.querySelector('div.cards > div.card:last-child')\n        let lastDataOffset  = lastData.offsetTop + lastData.clientHeight\n        let pageOffset      = window.pageYOffset + window.innerHeight\n\n        if (pageOffset > lastDataOffset) {\n            this.loadMore()\n        }\n    }\n\n    handleScrollWeb = () => {\n        let lastData        = document.querySelector('div.cards > div.card:last-child')\n        let lastDataOffset  = lastData.offsetLeft + lastData.clientWidth\n        let pageOffset      = window.pageXOffset + window.innerWidth\n\n        if (pageOffset > lastDataOffset) {\n            this.loadMore()\n        }\n    }\n\n    componentDidMount() {\n        let initialUsers = JSON.parse(localStorage.getItem('initialUsers'));\n        if (!initialUsers || initialUsers.length < 1) {\n            this.loadUser()\n        } else {\n            this.setState({\n                users: initialUsers\n            })\n        }\n\n        if (window.innerWidth >= 768) {\n            this.scrollListener = window.addEventListener('scroll', e => {\n                this.handleScrollWeb(e)\n            })\n        } else {\n            this.scrollListener = window.addEventListener('scroll', e => {\n                this.handleScrollMobile(e)\n            })\n        }\n    }\n\n    defineCardColor = (age) => {\n        if (age < 21) {\n            return 'red'\n        } else if (age > 56) {\n            return 'blue'\n        } else {\n            return 'green'\n        }\n    }\n\n    sortList = (key) => {\n        let arrayCopy = [...this.state.users]\n        if (key === 'city') {\n            const myOrderedArray = _.sortBy(arrayCopy, `location.${key}`)\n            this.setState({ users: myOrderedArray }, () => {\n                localStorage.setItem('initialUsers', JSON.stringify(this.state.users))\n            })\n        } else {\n            const myOrderedArray = _.sortBy(arrayCopy, `dob.${(key)}`)\n            this.setState({ users: myOrderedArray }, () => {\n                localStorage.setItem('initialUsers', JSON.stringify(this.state.users))\n            })\n        }\n    }\n\n    render() {\n        const { users } = this.state\n        return (\n            <div className={'app'}>\n                <NavBar sortList={this.sortList} />\n                <div className={'home container'}>\n                    <div className={'cards'}>\n                        {\n                            users.map(user => (\n                               <Card user={user} defineColor={this.defineCardColor} key={user.login.username}/>\n                            ))\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}