{"ast":null,"code":"var _jsxFileName = \"/Volumes/Hari_Libur/FE_2020/NRI-test/src/components/container/App.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport { Card, NavBar } from '../components/Components';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      users: []\n    };\n\n    this.loadUser = () => {\n      const {\n        users\n      } = this.state;\n      const url = 'https://randomuser.me/api/?results=10';\n      axios.get(url).then(response => {\n        this.setState({\n          users: [...users, ...response.data.results]\n        });\n        localStorage.setItem('initialUsers', JSON.stringify(this.state.users));\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.loadMore = () => {\n      if (this.state.users.length !== 100) {\n        this.loadUser();\n        localStorage.setItem('initialUsers', JSON.stringify(this.state.users));\n      }\n    };\n\n    this.handleScrollMobile = () => {\n      let lastData = document.querySelector('div.cards > div.card:last-child');\n      let lastDataOffset = lastData.offsetTop + lastData.clientHeight;\n      let pageOffset = window.pageYOffset + window.innerHeight;\n\n      if (pageOffset > lastDataOffset) {\n        this.loadMore();\n      }\n    };\n\n    this.handleScrollWeb = () => {\n      let lastData = document.querySelector('div.cards > div.card:last-child');\n      let lastDataOffset = lastData.offsetLeft + lastData.clientWidth;\n      let pageOffset = window.pageXOffset + window.innerWidth;\n\n      if (pageOffset > lastDataOffset) {\n        this.loadMore();\n      }\n    };\n\n    this.defineCardColor = age => {\n      if (age < 21) {\n        return 'red';\n      } else if (age > 56) {\n        return 'blue';\n      } else {\n        return 'green';\n      }\n    };\n\n    this.sortList = key => {\n      let arrayCopy = [...this.state.users];\n\n      if (key === 'city') {\n        const myOrderedArray = _.sortBy(arrayCopy, `location.${key}`);\n\n        this.setState({\n          users: myOrderedArray\n        }, () => {\n          localStorage.setItem('initialUsers', JSON.stringify(this.state.users));\n        });\n      } else {\n        const myOrderedArray = _.sortBy(arrayCopy, `dob.${key}`);\n\n        this.setState({\n          users: myOrderedArray\n        }, () => {\n          localStorage.setItem('initialUsers', JSON.stringify(this.state.users));\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    let initialUsers = JSON.parse(localStorage.getItem('initialUsers'));\n\n    if (!initialUsers || initialUsers.length < 1) {\n      this.loadUser();\n    } else {\n      this.setState({\n        users: initialUsers\n      });\n    }\n\n    if (window.innerWidth >= 768) {\n      this.scrollListener = window.addEventListener('scroll', e => {\n        this.handleScrollWeb(e);\n      });\n    } else {\n      this.scrollListener = window.addEventListener('scroll', e => {\n        this.handleScrollMobile(e);\n      });\n    }\n  }\n\n  render() {\n    const {\n      users\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: 'app',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      sortList: this.sortList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: 'home container',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: 'cards',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }, users.map(user => /*#__PURE__*/React.createElement(Card, {\n      user: user,\n      defineColor: this.defineCardColor,\n      key: user.login.username,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 32\n      }\n    })))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Volumes/Hari_Libur/FE_2020/NRI-test/src/components/container/App.jsx"],"names":["React","Component","axios","_","Card","NavBar","App","state","users","loadUser","url","get","then","response","setState","data","results","localStorage","setItem","JSON","stringify","catch","err","console","log","loadMore","length","handleScrollMobile","lastData","document","querySelector","lastDataOffset","offsetTop","clientHeight","pageOffset","window","pageYOffset","innerHeight","handleScrollWeb","offsetLeft","clientWidth","pageXOffset","innerWidth","defineCardColor","age","sortList","key","arrayCopy","myOrderedArray","sortBy","componentDidMount","initialUsers","parse","getItem","scrollListener","addEventListener","e","render","map","user","login","username"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios                from 'axios'\nimport _                    from 'lodash'\nimport { Card, NavBar }     from '../components/Components'\n\nclass App extends Component {\n    state = {\n        users: []\n    }\n\n    loadUser = () => {\n        const { users } = this.state\n        const url = 'https://randomuser.me/api/?results=10'\n        axios.get(url)\n            .then(response => {\n                this.setState({\n                    users: [...users, ...response.data.results]\n                })\n                localStorage.setItem('initialUsers', JSON.stringify(this.state.users))\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    }\n\n    loadMore = () => {\n        if (this.state.users.length !== 100) {\n            this.loadUser()\n            localStorage.setItem('initialUsers', JSON.stringify(this.state.users))\n        }\n    }\n\n    handleScrollMobile = () => {\n        let lastData        = document.querySelector('div.cards > div.card:last-child')\n        let lastDataOffset  = lastData.offsetTop + lastData.clientHeight\n        let pageOffset      = window.pageYOffset + window.innerHeight\n\n        if (pageOffset > lastDataOffset) {\n            this.loadMore()\n        }\n    }\n\n    handleScrollWeb = () => {\n        let lastData        = document.querySelector('div.cards > div.card:last-child')\n        let lastDataOffset  = lastData.offsetLeft + lastData.clientWidth\n        let pageOffset      = window.pageXOffset + window.innerWidth\n\n        if (pageOffset > lastDataOffset) {\n            this.loadMore()\n        }\n    }\n\n    componentDidMount() {\n        let initialUsers = JSON.parse(localStorage.getItem('initialUsers'));\n        if (!initialUsers || initialUsers.length < 1) {\n            this.loadUser()\n        } else {\n            this.setState({\n                users: initialUsers\n            })\n        }\n\n        if (window.innerWidth >= 768) {\n            this.scrollListener = window.addEventListener('scroll', e => {\n                this.handleScrollWeb(e)\n            })\n        } else {\n            this.scrollListener = window.addEventListener('scroll', e => {\n                this.handleScrollMobile(e)\n            })\n        }\n    }\n\n    defineCardColor = (age) => {\n        if (age < 21) {\n            return 'red'\n        } else if (age > 56) {\n            return 'blue'\n        } else {\n            return 'green'\n        }\n    }\n\n    sortList = (key) => {\n        let arrayCopy = [...this.state.users]\n        if (key === 'city') {\n            const myOrderedArray = _.sortBy(arrayCopy, `location.${key}`)\n            this.setState({ users: myOrderedArray }, () => {\n                localStorage.setItem('initialUsers', JSON.stringify(this.state.users))\n            })\n        } else {\n            const myOrderedArray = _.sortBy(arrayCopy, `dob.${(key)}`)\n            this.setState({ users: myOrderedArray }, () => {\n                localStorage.setItem('initialUsers', JSON.stringify(this.state.users))\n            })\n        }\n    }\n\n    render() {\n        const { users } = this.state\n        return (\n            <div className={'app'}>\n                <NavBar sortList={this.sortList} />\n                <div className={'home container'}>\n                    <div className={'cards'}>\n                        {\n                            users.map(user => (\n                               <Card user={user} defineColor={this.defineCardColor} key={user.login.username}/>\n                            ))\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}